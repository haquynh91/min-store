"use strict";function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,r=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach((function(e){_defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(){var t;if(window.HIKO=_objectSpread(_objectSpread({},window.HIKO),{},{script:!0}),null===(t=window.HIKO)||void 0===t||!t.extension){if("function"==typeof $&&"function"==typeof $.attr)return o($);if("function"==typeof jQuery&&"function"==typeof jQuery.attr)return o(jQuery);e("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js").then((function(){return o($)}))}function e(t){var e=t.indexOf("http")>=0?t:"https://apps.hiko.link".concat(t);return document.querySelectorAll('script[src^="'.concat(e,'"]')).length>0?Promise.resolve():new Promise((function(t){var n=document.createElement("script");n.src=e,n.defer="defer",n.async="async",n.onload=function(){t()},document.head.appendChild(n)}))}function n(t){return document.querySelectorAll('link[href^="'.concat(t,'"]')).length>0?Promise.resolve():new Promise((function(e){var n=document.createElement("link");n.href=t+"?t=".concat((new Date).getTime()),n.rel="stylesheet",n.onload=function(){e()},document.head.appendChild(n)}))}function o(t){var o=/^(\/[a-zA-Z]{2,3}(-[a-zA-Z]{2})?)?\/challenge($|\?)/,a={cache:"hiko_socials",login:"abw"},r=function(){if(!(location.protocol.indexOf("http")<0||o.test(location.pathname))){var e=t('script[src*="hiko-auth.js"]')[0],n=t("<a href=".concat(e.src,"/>"))[0];return{shop:l(e.src).shop,origin:"".concat(n.protocol,"//").concat(n.hostname),instruction:l(location.href).ha}}}();if(null==r||!r.shop)return console.error("app loading fail");var i=r.shop,c=r.origin,s=r.instruction;function d(n){n||window.HIKO.cid?(window.HIKO.cid=n||window.HIKO.cid,window.HIKO.hikoAvatar?window.HIKO.hikoAvatar():e("/js/hiko-avatar.js")):((t('div[name="hiko-container"]').length||t('form[action*="/account"]').length)&&(window.HIKO.hikoWizard?window.HIKO.hikoWizard():p()),new Promise((function(t,e){var n=m(a.cache);n?t(n):f("POST","/apps/authapp/load",{}).then((function(e){v(a.cache,e),t(e)})).catch((function(t){console.error(t.message),e()}))})).then(g))}function p(){e("/js/hiko-wizard.js")}function l(t){var e={};return t.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,n,o){return e[n]=o})),e}function u(){var e=t("html").attr("lang");return/^[A-Za-z]{2,4}([_-][A-Za-z]{4})?([_-]([A-Za-z]{2}|[0-9]{3}))?$/.test(e)?e:""}function f(t,e,n){return new Promise((function(o,a){var r=new XMLHttpRequest,i=h(_objectSpread(_objectSpread({},n),{},{href:encodeURIComponent(location.href),script:"js",lang:u()}));if("POST"===t){var s="".concat(location.origin).concat(e);r.open("POST",s,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else r.open("GET","".concat(c).concat(e,"?").concat(i));r.onload=function(){return 200===r.status?o(JSON.parse(r.responseText)):a()},r.send(i)}))}function h(t){var e=[];for(var n in t)e.push("".concat(n,"=").concat(encodeURIComponent(t[n]||"")));return e.join("&")}function m(t){var e=sessionStorage.getItem(t);if(e)return JSON.parse(e)}function v(t,e){if(!t)return console.error("invalid storage set");if(e)if(e.error){var n=JSON.parse(JSON.stringify(e));delete n.error,sessionStorage.setItem(t,JSON.stringify(n))}else sessionStorage.setItem(t,JSON.stringify(e));else sessionStorage.removeItem(t)}function g(t){var e;if(!/.*\/account/.test(location.pathname))if(/(iPod|iPhone|iPad)/.test(navigator.userAgent)||/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))console.warn("one tap not supported");else if(function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}("onet"))console.warn("one tap supressed");else if(null!==(e=t.onetap)&&void 0!==e&&e.enable){var n=t.onetap.custom?b:O;t.onetap.delay?isNaN(t.onetap.delay)||setTimeout((function(){n(t,y)}),1e3*t.onetap.delay):n(t,y)}}function y(t){f("POST","/apps/authapp/onetap",_objectSpread(_objectSpread({},t),{},{href:encodeURIComponent(location.href),lang:u()})).then((function(t){t&&(t.token?(k(),S(t)):t.multipass?(k(),window.location.replace(t.multipass)):(k(),j(t)))}))}function w(t){"display"===(null==t?void 0:t.g)&&null!=t&&t.h&&f("POST","/apps/authapp/event",{name:"onetappop",path:location.pathname}).catch((function(t){return console.error(t.message)}))}function b(n,o){var a,r,i,c=(null===(a=n.onetap.position)||void 0===a?void 0:a.right)||20,s=(null===(r=n.onetap.position)||void 0===r?void 0:r.top)||20,d=(null===(i=n.onetap.position)||void 0===i?void 0:i.zIndex)||999,p="onetap".concat((new Date).getTime());window[p]=o;var l="momentCallback".concat((new Date).getTime());window[l]=w,t("body").append('<div id="g_id_onload"\n                data-client_id="'.concat(n.onetap.id,'"\n                data-prompt_parent_id="g_id_onload"\n                data-callback="').concat(p,'"\n                data-moment_callback="').concat(l,'"\n                style="position: absolute; right: ').concat(c,"px; top: ").concat(s,"px;  z-index: ").concat(d,';">\n                </div>')),e("https://accounts.google.com/gsi/client")}function O(e,n){var o,a,r,i="_".concat(Math.round(1e7*Math.random()).toString(36)),c=(null===(o=e.onetap.position)||void 0===o?void 0:o.right)||20,s=(null===(a=e.onetap.position)||void 0===a?void 0:a.top)||20,d=(null===(r=e.onetap.position)||void 0===r?void 0:r.zIndex)||999;t("body").append("\n            <style>\n              .".concat(i,"cz {position: fixed !important;  right: ").concat(c,"px; top: ").concat(s,"px;  z-index: ").concat(d,";}\n              .").concat(i,"z { border: none;}\n              @media screen and (max-width: 480px) { .").concat(i,"z { position: fixed; bottom: 0px; left: 0px; z-index: 2147483647; width: 100%; height: 239px;  border: none; } }\n            </style>\n            "));var p=t('<div style="display: none;" class="'.concat(i,'cz"/>'));window.HIKO.onetap=p;var l=t('<iframe class="'.concat(i,'z" src="https://cdn.shopify.com/s/files/1/0279/9478/3882/t/5/assets/hiko-tap.html?v=').concat((new Date).getTime(),"&client=").concat(e.onetap.id,'"></iframe>'));t("body").append(p.append(l)),window.addEventListener("message",(function(t){"size"===t.data.type?(l.css("width",t.data.width+"px"),l.css("height",t.data.height+"px")):"notification"===t.data.type?"display"===t.data.notification.g?!0===t.data.notification.h?(p.css("display","block"),f("POST","/apps/authapp/event",{name:"onetappop",path:location.pathname}).catch((function(t){return console.error(t.message)}))):(console.error(t.data.notification.j),p.remove()):"display"!==t.data.notification.g&&(p.remove(),"user_cancel"===t.data.notification.l&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var a="; expires="+o.toGMTString();document.cookie=t+"="+e+a+"; path=/"}("onet",t.data.notification.l)):"credential"===t.data.type&&n(t.data.token)}))}function j(t){_(t.contextpath,{"customer[email]":t.email,"customer[password]":t.password})}function S(t){_(t.contextpath,{"customer[password]":t.password,"customer[password_confirmation]":t.password,token:t.token,utf8:"âœ“",id:t.id})}function _(e,n){var o=t('<form method="post" action="'.concat(e,'" style="display: none;"/>'));for(var a in n)n[a]&&o.append('<input name="'.concat(a,'" value="').concat(n[a],'"/>'));t("body").append(o),o.submit()}function k(){var e=t('<div id="hikoloading"></div>');t("body").append(e),e.load("https://cdn.shopify.com/s/files/1/0279/9478/3882/t/5/assets/hiko-spinner.html?v=".concat((new Date).getTime()))}window.HIKO=_objectSpread(_objectSpread({},window.HIKO),{},{shop:i,origin:c,instruction:s,qs:h,getStorage:m,setStorage:v,$:t,renderLogin:j,renderActivate:S,post:_,displayLoading:k,ajax:f,KEYS:a,wizardVisible:function(){},getLink:n,cid:"undefined"!=typeof __st&&__st.cid?__st.cid:void 0,getLang:u}),window.hikoSocialLogin=d,d(),function(){try{var e=new MutationObserver((function(e){t(e).each((function(e,n){"attributes"===n.type&&"lang"===n.attributeName&&(v(a.cache),p()),"childList"===n.type&&n.addedNodes.length>0&&t(n.addedNodes).each((function(e,n){if(n.nodeType===Node.ELEMENT_NODE){if(t(n).find('form[action*="/account"]').length&&p(),"FORM"===n.nodeName){var o,a=_createForOfIteratorHelper(n.attributes);try{for(a.s();!(o=a.n()).done;){var r=o.value;"action"===r.name&&r.value.indexOf("/account")>=0&&p()}}catch(t){a.e(t)}finally{a.f()}}t(n).find('div[name="hiko-container"]').each((function(e,n){void 0===t(n).attr("app")&&p()}))}}))}))}));t("html")[0]&&e.observe(t("html")[0],{attributes:!0,attributeFilter:["lang"]}),t("body")[0]&&e.observe(t("body")[0],{childList:!0,subtree:!0})}catch(t){console.error(t.message)}}()}}();